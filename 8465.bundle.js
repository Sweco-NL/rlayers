"use strict";(self.webpackChunkrlayers=self.webpackChunkrlayers||[]).push([[8465],{9646:(e,t,r)=>{r.d(t,{ZP:()=>i,fI:()=>s});var n=r(4187),o=r(6414);const i=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?(0,o.U2)(t.dataProjection):this.readProjection(e);t.extent&&r&&"tile-pixels"===r.getUnits()&&(r=(0,o.U2)(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}getType(){return(0,n.O3)()}readFeature(e,t){return(0,n.O3)()}readFeatures(e,t){return(0,n.O3)()}readGeometry(e,t){return(0,n.O3)()}readProjection(e){return(0,n.O3)()}writeFeature(e,t){return(0,n.O3)()}writeFeatures(e,t){return(0,n.O3)()}writeGeometry(e,t){return(0,n.O3)()}};function s(e,t,r){const n=r?(0,o.U2)(r.featureProjection):null,i=r?(0,o.U2)(r.dataProjection):null;let s;if(s=n&&i&&!(0,o.OP)(n,i)?(t?e.clone():e).transform(t?n:i,t?i:n):e,t&&r&&void 0!==r.decimals){const t=Math.pow(10,r.decimals),n=function(e){for(let r=0,n=e.length;r<n;++r)e[r]=Math.round(e[r]*t)/t;return e};s===e&&(s=e.clone()),s.applyTransform(n)}return s}},8465:(e,t,r)=>{r.d(t,{Z:()=>x});var n=r(1090),o=r(5487),i=r(1694),s=r(8641),a=r(5818);class u extends i.Z{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(a.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push((0,a.oL)(this.geometries_[e],o.Z.CHANGE,this.changed,this))}clone(){const e=new u(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,r,n){if(n<(0,s.qf)(this.getExtent(),e,t))return n;const o=this.geometries_;for(let i=0,s=o.length;i<s;++i)n=o[i].closestPointXY(e,t,r,n);return n}containsXY(e,t){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)if(r[n].containsXY(e,t))return!0;return!1}computeExtent(e){(0,s.YN)(e);const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)(0,s.l7)(e,t[r].getExtent());return e}getGeometries(){return c(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let n=!1;for(let o=0,i=r.length;o<i;++o){const i=r[o],s=i.getSimplifiedGeometry(e);t.push(s),s!==i&&(n=!0)}if(n){const e=new u(null);return e.setGeometriesArray(t),e}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,t){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].rotate(e,t);this.changed()}scale(e,t,r){r||(r=(0,s.qg)(this.getExtent()));const n=this.geometries_;for(let o=0,i=n.length;o<i;++o)n[o].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(c(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let n=0,o=r.length;n<o;++n)r[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function c(e){const t=[];for(let r=0,n=e.length;r<n;++r)t.push(e[r].clone());return t}const l=u;var h=r(9646),m=r(4187);class g extends h.ZP{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(d(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(d(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return(0,m.O3)()}readFeaturesFromObject(e,t){return(0,m.O3)()}readGeometry(e,t){return this.readGeometryFromObject(d(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return(0,m.O3)()}readProjection(e){return this.readProjectionFromObject(d(e))}readProjectionFromObject(e){return(0,m.O3)()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return(0,m.O3)()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return(0,m.O3)()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return(0,m.O3)()}}function d(e){if("string"==typeof e){return JSON.parse(e)||null}return null!==e?e:null}const p=g;var y=r(2083),f=r(7403),j=r(6259),O=r(5063),G=r(188),P=r(3083),F=r(9515),b=r(6414),_=r(9374);function w(e,t){if(!e)return null;let r;switch(e.type){case"Point":r=function(e){return new G.Z(e.coordinates)}(e);break;case"LineString":r=function(e){return new y.Z(e.coordinates)}(e);break;case"Polygon":r=function(e){return new P.ZP(e.coordinates)}(e);break;case"MultiPoint":r=function(e){return new j.Z(e.coordinates)}(e);break;case"MultiLineString":r=function(e){return new f.Z(e.coordinates)}(e);break;case"MultiPolygon":r=function(e){return new O.Z(e.coordinates)}(e);break;case"GeometryCollection":r=function(e,t){const r=e.geometries.map((function(e){return w(e,undefined)}));return new l(r)}(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,h.fI)(r,!1,t)}function C(e,t){const r=(e=(0,h.fI)(e,!0,t)).getType();let n;switch(r){case"Point":n=function(e,t){return{type:"Point",coordinates:e.getCoordinates()}}(e);break;case"LineString":n=function(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case"Polygon":n=function(e,t){let r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}(e,t);break;case"MultiPoint":n=function(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case"MultiLineString":n=function(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case"MultiPolygon":n=function(e,t){let r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}(e,t);break;case"GeometryCollection":n=function(e,t){return delete(t=Object.assign({},t)).featureProjection,{type:"GeometryCollection",geometries:e.getGeometriesArray().map((function(e){return C(e,t)}))}}(e,t);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return n}const x=class extends p{constructor(e){e=e||{},super(),this.dataProjection=(0,b.U2)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=(0,b.U2)(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;r="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const o=w(r.geometry,t),i=new n.Z;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(o),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i}readFeaturesFromObject(e,t){let r=null;if("FeatureCollection"===e.type){r=[];const n=e.features;for(let e=0,o=n.length;e<o;++e)r.push(this.readFeatureFromObject(n[e],t))}else r=[this.readFeatureFromObject(e,t)];return r}readGeometryFromObject(e,t){return w(e,t)}readProjectionFromObject(e){const t=e.crs;let r;return t?"name"==t.type?r=(0,b.U2)(t.properties.name):"EPSG"===t.type?r=(0,b.U2)("EPSG:"+t.properties.code):(0,F.h)(!1,36):r=this.dataProjection,r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},n=e.getId();if(void 0!==n&&(r.id=n),!e.hasProperties())return r;const o=e.getProperties(),i=e.getGeometry();return i&&(r.geometry=C(i,t),delete o[e.getGeometryName()]),(0,_.x)(o)||(r.properties=o),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let n=0,o=e.length;n<o;++n)r.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return C(e,this.adaptOptions(t))}}}}]);